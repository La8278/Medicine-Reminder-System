<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedTrack - Add Medicine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0b6b9a;
            --primary-light: #4da6e0;
            --primary-dark: #123e57;
            --accent-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --text-color: #174c6e;
            --light-bg: #f5f8fb;
            --white: #ffffff;
            --shadow: rgba(11,107,154,0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--light-bg) 0%, #eef8ff 100%);
            min-height: 100vh;
            color: var(--text-color);
            overflow-x: hidden;
        }
        
        /* Background Animation */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .floating-shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(77, 166, 224, 0.08);
            animation: float 25s infinite linear;
        }
        
        .floating-shape:nth-child(1) {
            width: 60px;
            height: 60px;
            top: 10%;
            left: 5%;
            animation-duration: 30s;
        }
        
        .floating-shape:nth-child(2) {
            width: 100px;
            height: 100px;
            top: 70%;
            left: 80%;
            animation-duration: 35s;
            background: rgba(46, 204, 113, 0.06);
        }
        
        .floating-shape:nth-child(3) {
            width: 80px;
            height: 80px;
            top: 40%;
            left: 85%;
            animation-duration: 25s;
            background: rgba(18, 62, 87, 0.04);
        }
        
        .floating-shape:nth-child(4) {
            width: 120px;
            height: 120px;
            top: 80%;
            left: 10%;
            animation-duration: 40s;
            background: rgba(77, 166, 224, 0.08);
        }
        
        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            33% {
                transform: translate(30px, -50px) rotate(120deg);
            }
            66% {
                transform: translate(-20px, 20px) rotate(240deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Top Bar - same visual language as other pages */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, var(--white), #eaf6ff);
            padding: 18px 28px;
            box-shadow: 0 6px 18px rgba(11,107,154,0.06);
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .top-bar-title {
            font-size: 2.1rem;
            font-weight: 800;
            color: var(--primary-dark);
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: pulseTitle 3s infinite;
        }
        
        @keyframes pulseTitle {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .top-bar-actions {
            display: flex;
            gap: 12px;
        }

        .topbar-btn {
            background: linear-gradient(135deg, var(--primary-light), #77c3f0);
            color: var(--white);
            border: none;
            border-radius: 10px;
            padding: 11px 20px;
            font-size: 1.02rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 20px rgba(77,166,224,0.10);
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }
        
        .topbar-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .topbar-btn:hover::before {
            left: 100%;
        }

        .topbar-btn:hover {
            transform: scale(1.04);
            box-shadow: 0 12px 30px rgba(77,166,224,0.14);
        }

        .container {
            background: linear-gradient(135deg, var(--white), #eef6ff);
            padding: 26px;
            border-radius: 16px;
            box-shadow: 0 12px 28px rgba(11,107,154,0.06);
            width: 100%;
            max-width: 560px;
            animation: fadeIn 0.5s ease;
            border: 1px solid #eef6fb;
            margin: 40px auto;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-light), var(--accent-color));
            animation: borderFlow 3s linear infinite;
        }
        
        @keyframes borderFlow {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            text-align: center;
            color: var(--primary-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 1.6rem;
            font-weight: 800;
            position: relative;
            padding-bottom: 10px;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-light), var(--accent-color));
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 16px;
            animation: slideInForm 0.6s ease-out forwards;
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        .form-group:nth-child(4) { animation-delay: 0.4s; }
        .form-group:nth-child(5) { animation-delay: 0.5s; }
        .form-group:nth-child(6) { animation-delay: 0.6s; }
        .form-group:nth-child(7) { animation-delay: 0.7s; }
        .form-group:nth-child(8) { animation-delay: 0.8s; }
        .form-group:nth-child(9) { animation-delay: 0.9s; }
        
        @keyframes slideInForm {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        label {
            font-weight: 600;
            display: block;
            margin-bottom: 8px;
            color: var(--primary-dark);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s ease;
        }

        input[type="text"], input[type="number"], input[type="date"] {
            width: 100%;
            padding: 12px 14px;
            border-radius: 8px;
            border: 1.5px solid #d6eaf7;
            font-size: 14px;
            transition: all 0.3s ease;
            background: var(--white);
            color: var(--text-color);
        }

        input[type="text"]:focus, input[type="number"]:focus, input[type="date"]:focus {
            border-color: var(--primary-light);
            box-shadow: 0 0 0 6px rgba(77,166,224,0.07);
            outline: none;
            transform: translateY(-2px);
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            background: var(--white);
            border-radius: 8px;
            border: 1px solid #eef6fb;
            transition: all 0.3s ease;
            cursor: pointer;
            flex: 1;
            min-width: 120px;
            position: relative;
            overflow: hidden;
        }
        
        .option-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(77,166,224,0.1), transparent);
            transition: left 0.5s;
        }
        
        .option-item:hover::before {
            left: 100%;
        }

        .option-item:hover {
            background: linear-gradient(90deg, rgba(77,166,224,0.12), rgba(119,195,240,0.06));
            transform: translateY(-3px);
            border-color: rgba(77,166,224,0.16);
            box-shadow: 0 8px 18px rgba(77,166,224,0.06);
        }

        .option-item:hover label {
            color: var(--primary-dark);
        }

        .option-item input[type="radio"], 
        .option-item input[type="checkbox"] {
            margin: 0;
            width: auto;
        }

        .option-item label {
            margin: 0;
            font-weight: 500;
            color: var(--text-color);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        button {
            width: 100%;
            padding: 12px 14px;
            background: linear-gradient(135deg, var(--primary-light), #77c3f0);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 12px;
            box-shadow: 0 8px 20px rgba(77,166,224,0.12);
            position: relative;
            overflow: hidden;
            animation: pulseBtn 2s infinite;
        }
        
        @keyframes pulseBtn {
            0% { box-shadow: 0 8px 20px rgba(77,166,224,0.12); }
            50% { box-shadow: 0 8px 20px rgba(77,166,224,0.18); }
            100% { box-shadow: 0 8px 20px rgba(77,166,224,0.12); }
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }

        button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 30px rgba(77,166,224,0.14);
        }

        a {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-align: center;
            margin-top: 14px;
            color: var(--primary-dark);
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: var(--white);
            border: 1px solid #eef6fb;
            position: relative;
            overflow: hidden;
        }
        
        a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(77,166,224,0.1), transparent);
            transition: left 0.5s;
        }
        
        a:hover::before {
            left: 100%;
        }

        a:hover {
            background: #f5fbff;
            color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(11,107,154,0.06);
        }

        .alert {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 14px;
            animation: slideIn 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border-left: 4px solid;
        }

        .alert-success {
            background: rgba(46, 204, 113, 0.12);
            color: var(--accent-color);
            border-color: var(--accent-color);
        }

        .alert-danger {
            background: rgba(231, 76, 60, 0.12);
            color: var(--danger-color);
            border-color: var(--danger-color);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-12px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.06); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Custom checkbox and radio button styling */
        input[type="radio"], input[type="checkbox"] {
            accent-color: var(--primary-light);
            transform: scale(1.1);
        }

        /* Placeholder text color */
        ::placeholder {
            color: #8c8c8c;
            opacity: 1;
        }

        /* Date input styling */
        input[type="date"] {
            cursor: pointer;
        }

        /* Icon styling with enhanced animations */
        i {
            transition: all 0.3s ease;
            color: var(--primary-light);
        }

        .option-item:hover i {
            color: var(--primary-dark);
            transform: scale(1.2) rotate(5deg);
        }

        button:hover i, a:hover i {
            transform: scale(1.2);
        }
        
        /* Special icon animations */
        .fa-plus-circle {
            animation: rotatePlus 3s infinite;
        }
        
        @keyframes rotatePlus {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fa-pills, .fa-capsules, .fa-wine-bottle, .fa-prescription-bottle, .fa-tint {
            animation: bounceIcon 2s infinite;
        }
        
        @keyframes bounceIcon {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .fa-balance-scale, .fa-ruler, .fa-calculator, .fa-clock, .fa-utensils, .fa-calendar-plus, .fa-calendar-check {
            animation: floatIcon 3s infinite;
        }
        
        @keyframes floatIcon {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-3px) rotate(2deg); }
            66% { transform: translateY(3px) rotate(-2deg); }
        }
        
        .fa-home, .fa-sign-out-alt, .fa-arrow-left {
            animation: slideIcon 2s infinite;
        }
        
        @keyframes slideIcon {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(3px); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 20px;
            }

            .options {
                gap: 8px;
            }
            
            .option-item {
                padding: 8px 12px;
                font-size: 13px;
                min-width: 100px;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .top-bar {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .top-bar-title {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .option-item {
                min-width: calc(50% - 8px);
            }
            
            .options {
                gap: 6px;
            }
            
            .topbar-btn {
                padding: 10px 15px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="background-animation">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>

    <!-- Top Bar - Same as Dashboard -->
    <div class="top-bar">
        <div class="top-bar-title">
            <i class="fas fa-notes-medical"></i> MedTrack
        </div>
        <div class="top-bar-actions">
            <a href="{{ url_for('home') }}" class="topbar-btn"><i class="fas fa-home"></i> Home</a>
            <a href="{{ url_for('logout') }}" class="topbar-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
    </div>

    <div class="container">
        <h2><i class="fas fa-plus-circle pulse"></i> Add Medicine</h2>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, msg in messages %}
              <div class="alert alert-{{ category }}">
                <i class="fas fa-{% if category == 'success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>
                {{ msg }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="POST">
            <div class="form-group">
                <label><i class="fas fa-pills"></i> Medicine Name</label>
                <input type="text" name="name" placeholder="Enter medicine name" required>
            </div>

            <div class="form-group">
                <label><i class="fas fa-capsules"></i> Type</label>
                <div class="options">
                    <div class="option-item">
                        <input type="radio" name="med_type" value="Capsule" required id="capsule">
                        <label for="capsule"><i class="fas fa-capsules"></i> Capsule</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="med_type" value="Syrup" id="syrup">
                        <label for="syrup"><i class="fas fa-wine-bottle"></i> Syrup</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="med_type" value="Ointment" id="ointment">
                        <label for="ointment"><i class="fas fa-prescription-bottle"></i> Ointment</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="med_type" value="Drops" id="drops">
                        <label for="drops"><i class="fas fa-tint"></i> Drops</label>
                    </div>
                </div>
            </div>

            <div class="form-group" id="dropsTypeGroup" style="display:none; margin-top:10px;">
                <label><i class="fas fa-tint"></i> Drops Type</label>
                <div class="options">
                    <div class="option-item">
                        <input type="radio" name="drops_type" value="Ear" id="ear">
                        <label for="ear"><i class="fas fa-ear"></i> Ear</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="drops_type" value="Nose" id="nose">
                        <label for="nose"><i class="fas fa-wind"></i> Nose</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="drops_type" value="Eye" id="eye">
                        <label for="eye"><i class="fas fa-eye"></i> Eye</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label><i class="fas fa-balance-scale"></i> Dosage</label>
                <input type="text" name="dosage" placeholder="Enter dosage amount" required>
            </div>

            <div class="form-group">
                <label><i class="fas fa-ruler"></i> Unit</label>
                <div class="options">
                    <div class="option-item">
                        <input type="radio" name="unit" value="g" required id="g">
                        <label for="g">g</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="unit" value="mg" id="mg">
                        <label for="mg">mg</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="unit" value="ml" id="ml">
                        <label for="ml">ml</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="unit" value="tsp" id="tsp">
                        <label for="tsp">tsp</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="unit" value="drops" id="drops_unit">
                        <label for="drops_unit">drops</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label><i class="fas fa-calculator"></i> Count</label>
                <input type="number" name="count" placeholder="Enter quantity" required>
            </div>

            <div class="form-group">
                <label><i class="fas fa-clock"></i> Timing</label>
                <div class="options">
                    <div class="option-item">
                        <input type="checkbox" name="timing" value="Morning" id="morning">
                        <label for="morning"><i class="fas fa-sun"></i> Morning</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" name="timing" value="Noon" id="noon">
                        <label for="noon"><i class="fas fa-sun"></i> Noon</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" name="timing" value="Evening" id="evening">
                        <label for="evening"><i class="fas fa-moon"></i> Evening</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" name="timing" value="Night" id="night">
                        <label for="night"><i class="fas fa-moon"></i> Night</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label><i class="fas fa-utensils"></i> Before/After Food</label>
                <div class="options">
                    <div class="option-item">
                        <input type="radio" name="before_after" value="Before Food" required id="before">
                        <label for="before"><i class="fas fa-utensils"></i> Before Food</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="before_after" value="After Food" id="after">
                        <label for="after"><i class="fas fa-utensils"></i> After Food</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="before_after" value="With Food" id="with">
                        <label for="with"><i class="fas fa-utensils"></i> With Food</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label><i class="fas fa-calendar-plus"></i> Start Date</label>
                <input type="date" name="start_date" required>
            </div>

            <div class="form-group">
                <label><i class="fas fa-calendar-check"></i> End Date</label>
                <input type="date" name="end_date" required>
            </div>

            <button type="submit">
                <i class="fas fa-plus"></i> Add Medicine
            </button>
        </form>

        <a href="{{ url_for('dashboard') }}">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <script>
        // Show drops options only if "Drops" is selected, and keep it visible
        function updateDropsTypeVisibility() {
            const dropsGroup = document.getElementById("dropsTypeGroup");
            const selectedType = document.querySelector('input[name="med_type"]:checked');
            if (selectedType && selectedType.value === "Drops") {
                dropsGroup.style.display = "block";
            } else {
                dropsGroup.style.display = "none";
            }
        }
        document.querySelectorAll('input[name="med_type"]').forEach((el) => {
            el.addEventListener('change', updateDropsTypeVisibility);
        });
        // On page load, set correct visibility
        document.addEventListener('DOMContentLoaded', updateDropsTypeVisibility);

        // Add interactive animations
        document.addEventListener('DOMContentLoaded', function() {
            // Focus animations for inputs
            const inputs = document.querySelectorAll('input[type="text"], input[type="number"], input[type="date"]');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Hover effects for option items
            const optionItems = document.querySelectorAll('.option-item');
            optionItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Button click effects
            const buttons = document.querySelectorAll('button, a');
            buttons.forEach(button => {
                button.addEventListener('mousedown', function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                button.addEventListener('mouseup', function() {
                    if (this.tagName === 'BUTTON') {
                        this.style.transform = 'scale(1.02)';
                    } else {
                        this.style.transform = 'scale(1.02)';
                    }
                });
            });
            
            // Add icon animation on form focus
            const formElements = document.querySelectorAll('input, select, textarea');
            formElements.forEach(element => {
                element.addEventListener('focus', function() {
                    const label = this.closest('.form-group').querySelector('label');
                    if (label) {
                        const icon = label.querySelector('i');
                        if (icon) {
                            icon.style.animation = 'bounceIcon 0.5s ease';
                            setTimeout(() => {
                                icon.style.animation = '';
                            }, 500);
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
